@page
@inject CookieOptions Cookie
@model Project.Pages.Class.StudentProgressModel
@{
    Layout = "Shared/_Layout";
    ViewData["title"] = "Student List";
}
@{
    <h5 class="mt-4 mb-3">Module: @Cookie.GetCookies("module")</h5>
    <nav aria-label="breadcrumb" class="mt-2">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-page="./Index">Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Students</li>
        </ol>
    </nav>
    <h2 class="mt-3 mb-5">Students</h2>
    <table id="datatable-buttons"
           class="table table-striped table-bordered dt-responsive"
           style="border-collapse:collapse; border-spacing: 0; width: 100%;">
        <thead>
        <tr>

            <th> Student Id</th>
            <th>  First Name</th>
            <th> Last Name</th>
            <th> Modules</th>
            <th>Action</th>
        </tr>
        </thead>


        <tbody>
        @foreach (var item in Model.Info)
        {
           
            <tr>
                @{
                    var a = item.ModuleProgress.Select(x => x.Name);
                        var b = string.Join(", ", a);
}
                <td class="table-row">@item.Id</td>
                <td class="table-row">@item.Forename</td>
                <td class="table-row">@item.Surname</td>
                <td class="table-row">@b</td>
                <td class="table-row">
                    <a class="btn btn-outline-primary" asp-page="./Details" asp-route-id="@item.Id">
                        <i class="fa fa-info mr-1"></i>
                        Details
                    </a>
                </td>

            </tr>
        }

        </tbody>
    </table>
}

@section Scripts{
    <script src="~/lib/datatable/js/jquery.dataTables.min.js"></script>
    <script src="~/lib/datatable/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/lib/datatable/js/dataTables.buttons.min.js"></script>
    <script src="~/lib/datatable/js/buttons.bootstrap4.min.js"></script>
    <script src="~/lib/datatable/js/jszip.min.js"></script>
    <script src="~/lib/datatable/js/buttons.html5.min.js"></script>
    <script src="~/lib/datatable/js/buttons.print.min.js"></script>
    <script src="~/lib/datatable/js/buttons.colVis.min.js"></script>
    <script src="~/lib/datatable/js/pdfmake.min.js"></script>
    <script src="~/lib/datatable/js/vfs_fonts.js"></script>
    <script src="~/lib/datatable/js/dataTables.responsive.min.js"></script>
    <script src="~/lib/datatable/js/responsive.bootstrap4.min.js"></script>
}

@section Css
{
    <link href="~/lib/datatable/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/datatable/css/buttons.bootstrap4.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/datatable/css/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css" />
}
